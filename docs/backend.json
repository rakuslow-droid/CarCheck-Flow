{
  "entities": {
    "Merchant": {
      "title": "Merchant",
      "type": "object",
      "description": "Represents a car shop (Merchant) in the system. Deployment Region: asia-northeast1.",
      "properties": {
        "id": { "type": "string" },
        "ownerId": { "type": "string", "description": "Firebase Auth UID of the shop manager." },
        "displayName": { "type": "string" },
        "lineAccessToken": { "type": "string" },
        "createdAt": { "type": "string", "format": "date-time" }
      },
      "required": ["id", "ownerId", "displayName", "createdAt"]
    },
    "Vehicle": {
      "title": "Vehicle",
      "type": "object",
      "description": "Vehicle inspection data extracted from LINE. Deployment Region: asia-northeast1.",
      "properties": {
        "id": { "type": "string" },
        "merchantId": { "type": "string" },
        "merchantOwnerId": { "type": "string", "description": "Denormalized ownerId for secure queries." },
        "lineUserId": { "type": "string" },
        "inspectionDate": { "type": "string", "format": "date" },
        "status": { "type": "string", "enum": ["Healthy", "Upcoming", "Critical"] },
        "plateNumber": { "type": "string" },
        "modelName": { "type": "string" },
        "createdAt": { "type": "string", "format": "date-time" }
      },
      "required": ["id", "merchantId", "merchantOwnerId", "lineUserId", "inspectionDate", "status"]
    }
  },
  "auth": {
    "providers": ["password", "anonymous"]
  },
  "firestore": {
    "/merchants/{merchantId}": {
      "schema": "#/entities/Merchant",
      "description": "Store for car shop profiles. Managed in Tokyo region."
    },
    "/merchants/{merchantId}/vehicles/{vehicleId}": {
      "schema": "#/entities/Vehicle",
      "description": "Sub-collection for vehicle data linked to a specific merchant."
    }
  }
}